<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	
	<!-- title -->
	
	<title>
	
		安装zabbi-agent2脚本 | 
	 
	杂记
	</title>
	
	<!-- keywords,description -->
	
	

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/favicon.ico">
	


	<!-- search -->
	<script>
		var searchEngine = "https://www.google.com/search?q=";
		if(typeof searchEngine == "undefined" || searchEngine == null || searchEngine == ""){
			searchEngine = "https://www.google.com/search?q=";
		}
		var homeHost = "default";
		if(typeof homeHost == "undefined" || homeHost == null || homeHost == ""){
			homeHost = window.location.host;
		}
	</script>


	
<link rel="stylesheet" href="/css/main.css">

	
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">

	
<link rel="stylesheet" href="https://jsd.cdn.zzko.cn/gh/highlightjs/cdn-release@9.17.1/build/styles/darcula.min.css">

	
<link rel="stylesheet" href="https://jsd.cdn.zzko.cn/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">


	
<script src="https://jsd.cdn.zzko.cn/npm/jquery@3.7.0/dist/jquery.min.js"></script>

	
<script src="https://jsd.cdn.zzko.cn/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

	
<script src="https://jsd.cdn.zzko.cn/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>

	
<script src="https://jsd.cdn.zzko.cn/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>

	
<script src="/js/main.js"></script>


	
		
<script src="https://jsd.cdn.zzko.cn/npm/leancloud-storage/dist/av-min.js"></script>

		
<script src="https://jsd.cdn.zzko.cn/npm/valine@v1.5.1/dist/Valine.min.js"></script>

	
	

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
	<header id="header">
    <a id="title" href="/" class="logo">杂记</a>

	<ul id="menu">
    
      <li class="menu-item">
        <a href="/about" class="menu-item-link">About</a>
      </li>
    

    
      <li class="menu-item">
        <a href="/tags" class="menu-item-link">Tags</a>
      </li>
    

    
      <li class="menu-item">
        <a href="/categories" class="menu-item-link">Categories</a>
      </li>
    

    
  
    
      <li class="menu-item">
        <a href='https://github.com/yefanflexi' class="menu-item-link" target="_blank">
          <i class="fa fa-github fa-2x"></i>
        </a>
      </li>
    
	</ul>
</header>

	
<div id="sidebar">
	<button id="sidebar-toggle" class="toggle" ><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="search" placeholder="Press Enter to search">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										01编程技术
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Java
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/07/12/01%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/Java/java%E9%9B%86%E5%90%88%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/">
                     
										    Java集合使用注意事项总结
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										redis
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/07/12/01%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/redis/redis/">
                     
										    redis常用的缓存策略
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/07/16/01%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/redis/redis%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5/">
                     
										    redis持久化
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/2024/07/16/01%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/redis/redis%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/">
                     
										    redis知识点
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										数据库
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										mysql
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/07/17/01%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E5%9F%BA%E7%A1%80/">
                     
										    myql基础
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										运维
									</a>
									
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										zabbix
									</a>
									
							<ul>
								<li class="file">
									<a href="/2024/08/01/01%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/%E8%BF%90%E7%BB%B4/zabbix/zabbix+granfan%E9%83%A8%E7%BD%B2%E8%AF%B4%E6%98%8E/">
                     
										    zabbix+granfan部署说明
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/2024/07/22/01%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/%E8%BF%90%E7%BB%B4/zabbix/%E5%AE%89%E8%A3%85zabbi-agent2%E8%84%9A%E6%9C%AC/">
                     
										    安装zabbi-agent2脚本
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
								</li>
								
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content" class="content">
		<h1 id="article-title">
	安装zabbi-agent2脚本
</h1>

<!-- meta -->
<div class="article-meta">
	

	<span>YEFAN</span>
	<span>2024-07-22 09:59:09</span>

  <div id="article-categories">
    
		  <span>Categories：</span>
      
          
              <span>
                  <i class="fa fa-folder" aria-hidden="true">
                  <a href="/categories/shell脚本/">shell脚本</a>
                  </i>
                
              </span>
          
      
    

    
		    <span>Tags：</span>
        
            
                <span>
                    <i class="fa fa-tag" aria-hidden="true">
                    <a href="/tags/zabbix-shell脚本/">zabbix,shell脚本</a>
                    </i>
                </span>
            
        
    
  </div>

</div>

<!-- content -->
<div id="article-content">
	<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span>    </span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">导入zabbix仓库并安装</span>    </span><br><span class="line">rpm -Uvh http://mirrors.ahntv.tech/zabbix/zabbix/5.0/rhel/7/x86_64/zabbix-release-5.0-1.el7.noarch.rpm   </span><br><span class="line">yum clean all </span><br><span class="line">sed -i &quot;s#repo.zabbix.com#10.1.10.5/zabbix#&quot; /etc/yum.repos.d/zabbix.repo</span><br><span class="line">yum clean all</span><br><span class="line">yum install zabbix-agent2  -y</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">获取当前主机ip</span>    </span><br><span class="line">IP_ADDRESS=$(ip addr | grep &#x27;inet &#x27; | grep -v &#x27;127.0.0.1&#x27; | awk &#x27;&#123;print $2&#125;&#x27; | cut -f1 -d&#x27;/&#x27;)  </span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">zabbix server地址</span>  </span><br><span class="line">serverip=10.2.13.145</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">备份zabbix_agentd.conf</span>  </span><br><span class="line">cp /etc/zabbix/zabbix_agent2.conf /etc/zabbix/zabbix_agent2.conf.bak  </span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">替换配置文件server地址</span>  </span><br><span class="line">sed -i &quot;s/^\(Server=\).*/\1$serverip/&quot; /etc/zabbix/zabbix_agent2.conf  </span><br><span class="line">sed -i &quot;s/^\(ServerActive=\).*/\1$serverip/&quot; /etc/zabbix/zabbix_agent2.conf  </span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">替换配置文件Hostname等于主机ip</span>  </span><br><span class="line">sed -i &quot;s/^\(Hostname=\).*/\1$IP_ADDRESS/&quot; /etc/zabbix/zabbix_agent2.conf</span><br><span class="line"><span class="meta prompt_">  </span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动Zabbix Agent服务</span>    </span><br><span class="line">systemctl restart zabbix-agent2  </span><br><span class="line">systemctl enable zabbix-agent2</span><br></pre></td></tr></table></figure>

</div>

<!-- post-guide -->

    <div class="post-guide">
        <div class="item left">
            
              <a href="/2024/08/01/01%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/%E8%BF%90%E7%BB%B4/zabbix/zabbix+granfan%E9%83%A8%E7%BD%B2%E8%AF%B4%E6%98%8E/">
                  <i class="fa fa-angle-left" aria-hidden="true"></i>
                  zabbix+granfan部署说明
              </a>
            
        </div>
        <div class="item right">
            
              <a href="/2024/07/17/01%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E5%9F%BA%E7%A1%80/">
                myql基础
                <i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>


<!-- comment - giscus -->


<!-- comment - valine -->


<script>
	
	
</script>

	</div>
	<div id="footer">
	<p>
		©<span id="footerYear-start"></span>-<span id="footerYear-end"></span>

		
				<a href="/">YEFAN</a>
				

					
							<!-- <br>
							Theme <a href="//github.com/wujun234/hexo-theme-tree" target="_blank">Tree</a>
							by <a href="//wujun.me" target="_blank">Wu Jun</a>
							Powered by <a href="//hexo.io" target="_blank">Hexo</a> -->
	</p>
</div>


	<script type="text/javascript">
		document.getElementById('footerYear-start').innerHTML = new Date().getFullYear() + '';
	</script>
	
		<script type="text/javascript">
			document.getElementById('footerYear-end').innerHTML = new Date().getFullYear() + '';
		</script>
		
	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>